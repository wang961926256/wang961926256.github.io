<!DOCTYPE html>
<html lang="zh-cn"><head>
  <!-- Basic Page Needs -->
  <meta charset="utf-8">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  
  <meta name="description" content="wangqj bolg">
  <meta name="author" content="Wangqj">
  <meta name="generator" content="Hugo 0.60.1" />
  
  <!-- Mobile Specific Metas -->
  <meta name="format-detection" content="telephone=no">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Posts</title>
  <link rel="icon" href="http://wangqji.cn/images/favicon.ico">

  <!-- Twitter Bootstrs CSS -->
  <link rel="stylesheet" href="http://wangqji.cn/plugins/bootstrap/bootstrap.min.css">
  <!-- Ionicons Fonts Css -->
  <link rel="stylesheet" href="http://wangqji.cn/plugins/ionicons/ionicons.min.css">
  <!-- animate css -->
  <link rel="stylesheet" href="http://wangqji.cn/plugins/animate-css/animate.css">
  <!-- Hero area slider css-->
  <link rel="stylesheet" href="http://wangqji.cn/plugins/slider/slider.css">
  <!-- slick slider -->
  <link rel="stylesheet" href="http://wangqji.cn/plugins/slick/slick.css">
  <!-- Fancybox -->
  <link rel="stylesheet" href="http://wangqji.cn/plugins/facncybox/jquery.fancybox.css">
  <!-- hover -->
  <link rel="stylesheet" href="http://wangqji.cn/plugins/hover/hover-min.css">
  <!-- template main css file -->
  
  <link rel="stylesheet" href="http://wangqji.cn/css/style.min.css" integrity="" media="screen">
</head><body><section class="top-bar animated-header">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <nav class="navbar navbar-expand-lg navbar-light bg-light">
                    <a class="navbar-brand" href="http://wangqji.cn/">
                        <img src="http://wangqji.cn/images/logo.png" alt="logo">
                    </a>
                    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navigation"
                        aria-controls="navigation" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>

                    <div class="collapse navbar-collapse" id="navigation">
                        <ul class="navbar-nav ml-auto">
                            <li class="nav-item">
                                <a class="nav-link"
                                    href="http://wangqji.cn/">Home</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="http://wangqji.cn/about">首页</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="http://wangqji.cn/service">编程</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="http://wangqji.cn/reading">读书</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="http://wangqji.cn/blog">博客</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="http://wangqji.cn/contact">联系</a>
                            </li>
                            
                    </div>
                </nav>
            </div>
        </div>
    </div>
</section>

<!-- Global Page Section Start -->
<section class="global-page-header">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="block">
                    <h2>Posts</h2>
                    <ol class="breadcrumb list-inline text-center">
                        <li class="list-inline-item">
                            <a href="http://wangqji.cn/">
                                <i class="ion-ios-home"></i>
                                Home &nbsp; &nbsp;/
                            </a>
                        </li>
                        <li class="active list-inline-item">Posts</li>
                    </ol>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- Global Page Section End -->

<section id="blog-full-width">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                
                <article class="wow fadeInDown" data-wow-delay=".3s" data-wow-duration="500ms">
                    
                    <div class="blog-post-image">
                        <a href="http://wangqji.cn/posts/kettle/">
                             
                        </a>
                    </div>
                    <div class="blog-content">
                        <h2 class="blogpost-title">
                            <a href="http://wangqji.cn/posts/kettle/">kettle 数据库迁移</a>
                        </h2>
                        <div class="blog-meta">
                            <span>Monday, Jan 1, 0001</span>
                            
                            
                        </div>
                        <p>
                            最近需要oracle数据库迁移数据到mysql数据库，用到了kettle spoon 工具，发现工具真的是很强大，好用，单表，多表都可以迁移，下面给大家分享一下使用的过程情况，仅供参考。
工具介绍 kettle spoon是Java语言编写，以图形化的界面来管理数据，并允许在不同数据库间迁移数据。 spoon软件解压后可直接运行，会自动检查Java环境，因此需要提前配置好环境。下面是本机的运行环境： JDK版本： 1.8 spoon版本：pdi-ce-8.2.0 软件的运行需要添加Java的数据库驱动包，在软件lib文件夹下，添加数据库驱动。 mysql-connector-java-5.0.8-bin.jar ojdbc6.jar 打开解压后的文件夹，找到并打开spoon.bat，进入spoon软件的界面。如下图所示。 双击转换，可以新建一个转换，设置操作数据库的控件。首先需要做以下两步。
第一步 新建DB连接 　DB连接右击，新建DB连接，以当前的需求为例，需要分别建立oracle和mysql两个数据库的连接。 第二步 数据库连接 　配置数据库的连接信息，数据库名称，账号，密码等，可以测试连接是否成功。下面是oracle数据库的连接。 改变编码方式（重要） 更改目标数据的编码方式，统一为utf8编码方式，否则会出现乱码。mysql数据库的连接的选项里，添加characterEncoding 设置编码方式为utf8。 数据的迁移可以分为单表的迁移和多表的迁移，两者的处理过程不同，下面将分别介绍。
1 单表迁移 　在核心对象，输入下找到表输入，拖动到工作区，同样在输出下，找到表输出，拖动到工作区。在表输入控件右键，按住shift键添加表输入到表输出的传输线。 双击表输入，设置相关的参数。选择数据库连接，这里源数据库是oracle，下面是SQL查询语句，如迁移A1表的数据。 在输出表控件上双击，设置参数，数据库连接，这里是mysql数据库，点击浏览并选择需要迁移的目标表a1。 点击三角符号&ndash;运行，弹出执行转换的窗口，默认设置，直接点击run，就开始数据的迁移。 下一步提示，文件已经改变，是否保存？选择是，并当前的作业保存在指定的区域。 程序运行，在控制台可以看到打印的日志信息 打开mysql数据库，双击查看对应的表，可以发现数据已经迁移过来了，这里需要注意的是设置数据库的编码方式。 2 多表迁移 单表的数据迁移比较简单，对多张表的批量迁移，需要将需要处理的数据库的表名存储到文件中，如data.txt，注意：一个表名一行，不要有空格。需要在第一行为其起一个别名，如ORCLDATA。 多表数据的批量迁移主要有三个步骤，分别如下所示：
（1）数据输入 在输入选项中添加文本文件输入控件，作业选项中添加复制记录到结果控件。本步骤的作用是从文本中读取表的信息，复制到结果集中。 双击文本文件输入，设计相关参数。浏览方式选中文本文件，并添加到当前的目录下，如下图所示。 在字段标签下，添加文本文件中起的别名ORCLDATA，数据类型为String，点击确定即可。 最后将其保存为数据输入.ktr，ktr是kettle的格式文件，可以用spoon直接打开，方便之后的操作。
（2）数据转换 　在表输出选项中分别添加从结果获取记录控件，设置变量控件，再次添加表输入控件和表输出控件，并用数据传输线进行连接，结果如下图所示。 双击从结果获取记录控件，设置字段名称，类型等参数。字段名称填写别名ORCLDATA,类型选择String类型。参考如下图所示。 双击设置变量，设置字段名称，变量名，变量活动类型，这里将字段名称和变量名设置为一样，也可以不同，变量活动类型选择vaild in the parent job，点击确定。 双击表输入，设置参数。选择源数据库，SQL语句，这里是oracle数据库，SQL语句需要填入参数形式的变量名。 同样，双击表输出，设置参数属性。选择目标数据库，目标表使用变量${别名}，提交记录数量，就是每次处理多少条数据。勾选使用批量插入。 最后将当前设置保存为数据转换.ktr，ktr是kettle的格式文件，可以用spoon直接打开。
（３）执行脚本 在核心对象下，通用选项下，分别添加Start控件，转换控件1，转换控件2和成功控件，并用传输线连接，结果如下。 双击转换1，选择执行文件的路径，这里需要选择的是数据输入.ktr文件，自动生成文件相对的路径。设置结果参考下图。 同样设置转换1的参数，选中数据转换.ktr文件，结果如下图所示。 注意还需要设置命名参数，并勾选两个设置，复制上一步结果到命名参数，将所有参数值传递到子转换，命名参数和流列名都设置为了ORCLDATA。结果如下图所示。 完成以上的设置，最后，点击run开始执行数据迁移，根据表中数据的多少决定其执行的快慢，可到数据库中查看数据的导入情况。 注：执行过程中，可能会出现问题，如表结构的字段设置不够，可根据实际的需要调整。若执行出现问题可在下面留言。
博客参考： https://blog.csdn.net/wuzhangweiss/article/details/78408029
                        </p>
                        <a href="http://wangqji.cn/posts/kettle/" class="btn btn-dafault btn-details hvr-bounce-to-right">Continue Reading</a>
                    </div>
                </article>
                
                <article class="wow fadeInDown" data-wow-delay=".3s" data-wow-duration="500ms">
                    
                    <div class="blog-post-image">
                        <a href="http://wangqji.cn/posts/page-print/">
                             
                        </a>
                    </div>
                    <div class="blog-content">
                        <h2 class="blogpost-title">
                            <a href="http://wangqji.cn/posts/page-print/">page print</a>
                        </h2>
                        <div class="blog-meta">
                            <span>Monday, Jan 1, 0001</span>
                            
                            
                        </div>
                        <p>
                            最近用到了打印页面信息的要求，网上查询资料，获知主要有两种方式：添加打印代码和借助控件实现打印，下面就来看看这两种方式。 1、 添加代码打印 添加代码打印就是在需要打印的代码出添加相应的代码实现打印的效果。主要分为三步来完成。 第一步在head头部添加打印的配置信息。根据需求修改，参考代码如下：
// 头部添加打印的信息 　&lt;script language=&#34;javascript&#34;&gt; function preview(oper){ //oper表示打印的区域数  if (oper &lt; 10){ bdhtml=window.document.body.innerHTML; //获取当前页的html代码  sprnstr=&#34;&lt;!--startprint&#34;+oper+&#34;--&gt;&#34;; //设置打印开始区  eprnstr=&#34;&lt;!--endprint&#34;+oper+&#34;--&gt;&#34;; //设置打印结束区  prnhtml=bdhtml.substring(bdhtml.indexOf(sprnstr)+18); //从开始代码向后取html  prnhtml=prnhtml.substring(0,prnhtml.indexOf(eprnstr));//从结束代码向前取html  window.document.body.innerHTML=prnhtml; window.print(); //调用window的打印功能  window.document.body.innerHTML=bdhtml; } else { window.print(); } } &lt;/script&gt; 第二步，确定打印区域，用startprint1和endprint1来标识位置。
// 选择需要打印的div &lt;!--startprint1--&gt; // &lt;!--打印内容开始--&gt; &lt;div &gt; ******打印代码区******** &lt;/div&gt; &lt;!--打印内容结束--&gt; &lt;!--endprint1--&gt; 第三步，打印的按钮，preview()里面参数表示可以打印的次数，这里可以设置为1。这样可以查看页面的打印效果。
// 表示buffer不受限制 &lt;input type=button name=&#39;button_export&#39; value=&#39;打印&#39; onclick=preview(1) &gt; //1表示只在一个区域使用 2、控件打印页面 利用jQuery的jqprint控件实现页面的打印，首先需要下载插件，地址可参考：http://www.jq22.com/jquery-info347。 通过以下几步操作完成打印的功能。 （1）导入js文件
                        </p>
                        <a href="http://wangqji.cn/posts/page-print/" class="btn btn-dafault btn-details hvr-bounce-to-right">Continue Reading</a>
                    </div>
                </article>
                
                <article class="wow fadeInDown" data-wow-delay=".3s" data-wow-duration="500ms">
                    
                    <div class="blog-post-image">
                        <a href="http://wangqji.cn/posts/powderdesigner/">
                             
                        </a>
                    </div>
                    <div class="blog-content">
                        <h2 class="blogpost-title">
                            <a href="http://wangqji.cn/posts/powderdesigner/">powderDesigner 连接本地数据库</a>
                        </h2>
                        <div class="blog-meta">
                            <span>Monday, Jan 1, 0001</span>
                            
                            
                        </div>
                        <p>
                            最近有个需求是画数据库各表结构的关联关系，而本地数据库有相应的表，为了在软件中获取对应的表结构。网上查询两种方式：第一种是将直接将PowderDesigner和数据库相连，导入进去，生成对应的结构。第二种是从excel文档中导入到软件中，每操作一次都需改excel文件中的内容。这里采用第一种方式，记录下来，方便之后的查看。
环境准备 软件：PowerDesigner 15.6 32位jdk：jdk-8u144-windows-i586 驱动包：mysql-connector-java-8.0.18.jar
第一步、软件安装 1、安装PowerDesigner软件，这里不再说具体安装的过程，基本上都是下一步，一直到最后，具体步骤可以网上查询，或者在博客参考【1】。 2、安装32位jdk。经过网上查看资料和试验发现，连接驱动需要用到的是32位的jdk，这里需要提前进行安装，并将mysql的驱动包放到jdk安装目录bin中。
第二步、新建PM文件 打开软件，点击新建，选择类型，新建PM文件，物理数据模型，可参考下图 第三步、连接信息设置 点击文件file &ndash;&gt; 反转引擎reverse Engineer &ndash;&gt; 数据库Database，配置相应的模型连接信息。 根据数据库类型选择相应的项，这里选择是mysql 5.0 点击configure，设置数据库的连接信息 点击小手，添加配置的连接的详细信息 具体设置信息可以参考以下。设置连接的名称，默认连接文件放的位置，数据库的用户名等信息。 注意：1、选择连接的类型为JDBC；2、DBMS类型为mysql；3、驱动包需要放到jdk的bin目录，并选中。 输入数据库的密码，点击连接。 第四步、导入数据库信息 选择连接的数据库信息，点击数据库&ndash;&gt; 更新数据库模型，如下图所示。 选择建立的连接，这里是mytest.dcp，注意勾选下面的复选框。 点击确定后，展示出来连接上的所有数据库，选择对应的数据库，可以看到库中所有的表，如下图所示。选择一张表，点击确定，就可以开始方向工程的操作，如下图所示。 等待进度条完成，就可以看到工作空间中添加成功该表的信息，如下图所示。 这样就完成了PowerDesigner与mysql数据库的连接，直接选中表可以自动反向生成相应的工程表信息。
错误的情况及处理 1、连接报错 控制台错误信息：
SQLSTATE = 01S00 The server time zone value &#39;�й���׼ʱ��&#39; is unrecognized or represents more than one time zone. You must configure either the server or JDBC driver (via the serverTimezone configuration property) to use a more specifc time zone value if you want to utilize time zone support.
                        </p>
                        <a href="http://wangqji.cn/posts/powderdesigner/" class="btn btn-dafault btn-details hvr-bounce-to-right">Continue Reading</a>
                    </div>
                </article>
                
            </div>
        </div>
    </div>
</section>


<!-- Call To Action Section Start -->
<section id="call-to-action">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div class="block">
                    <h2 class="title wow fadeInDown" data-wow-delay=".3s" data-wow-duration="500ms">SO WHAT YOU THINK ?</h1>
                    <p class="wow fadeInDown" data-wow-delay=".5s" data-wow-duration="500ms">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Nobis,<br>possimus commodi, fugiat magnam temporibus vero magni recusandae? Dolore, maxime praesentium.</p>
                    <a href="/contact" class="btn btn-default btn-contact wow fadeInDown" data-wow-delay=".7s" data-wow-duration="500ms">Contact with me</a>
                </div>
            </div>

        </div>
    </div>
</section>
<!-- Call To Action Section End -->


<!-- Footer Section Start -->
<footer id="footer">
    <div class="container">
        <div class="row content-justify-between">
            <div class="col-md-8 col-12 text-center text-lg-left text-md-left">
                <p class="copyright">Copyright:
                    <span>
                        <script>document.write(new Date().getFullYear())</script>
                    </span> Design and Developed by
                    <a href="http://www.Themefisher.com" target="_blank">Themefisher</a>.
                    <br> Get More Bootstrap Template From Our
                    <a href="https://themefisher.com/free-bootstrap-templates/" target="_blank">Store</a>
                </p>
            </div>
            <div class="col-md-4 col-12">
                <!-- Social Media -->
                <ul class="social text-center text-md-right text-lg-right">
                    
                    <li><a href="#"><i class="ion-social-facebook"></i></a></li>
                    
                    <li><a href="#"><i class="ion-social-instagram"></i></a></li>
                    
                    <li><a href="#"><i class="ion-social-linkedin"></i></a></li>
                    
                </ul>
            </div>
        </div>
    </div>
</footer>
<!-- footer section end -->

<!-- jquery -->
<script src="http://wangqji.cn/plugins/jQurey/jquery.min.js"></script>
<!-- Form Validation -->
<script src="http://wangqji.cn/plugins/form-validation/jquery.form.js"></script>
<script src="http://wangqji.cn/plugins/form-validation/jquery.validate.min.js"></script>
<!-- slick slider -->
<script src="http://wangqji.cn/plugins/slick/slick.min.js"></script>
<!-- bootstrap js -->
<script src="http://wangqji.cn/plugins/bootstrap/bootstrap.min.js"></script>
<!-- wow js -->
<script src="http://wangqji.cn/plugins/wow-js/wow.min.js"></script>
<!-- slider js -->
<script src="http://wangqji.cn/plugins/slider/slider.js"></script>
<!-- Fancybox -->
<script src="http://wangqji.cn/plugins/facncybox/jquery.fancybox.js"></script>
<!-- template main js -->

<script src="http://wangqji.cn/js/script.min.js"></script>
<!-- google analitycs -->
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'Your ID', 'auto');
    ga('send', 'pageview');
</script></body>
</html>